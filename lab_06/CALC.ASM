EXTRN NUMBER : WORD
EXTRN NEGATIVE : BYTE

PUBLIC HEX_STR
PUBLIC BIN_STR
PUBLIC SIGN
PUBLIC TO_UNSIGNED_HEX
PUBLIC TO_SIGNED_BIN

DATASEG SEGMENT PARA PUBLIC 'DATA'
    MASK16 DW 15
    MASK2 DW 1
    HEX_STR DB 4 DUP('0'), '$'
    BIN_STR DB 16 DUP('0'), '$'
    SIGN DB ' '
DATASEG ENDS

CODESEG SEGMENT PARA PUBLIC 'CODE'
    ASSUME CS:CODESEG, DS:DATASEG


TO_UNSIGNED_HEX PROC NEAR
    MOV AX, NUMBER
	XOR BX, BX
	CMP BL, NEGATIVE
	JE POSITIVE_TOHX
    NEG AX
	POSITIVE_TOHX:
    MOV BX, 3
    GETHEX:
        MOV DX, AX
        AND DX, MASK16
        CMP DL, 10
        JB ISDIGIT
        ADD DL, 7
        ISDIGIT:
        ADD DL, '0'
        MOV HEX_STR[BX], DL
        MOV CL, 4
        SAR AX, CL
        DEC BX
        CMP BX, -1
        JNE GETHEX
    RET
TO_UNSIGNED_HEX ENDP

TO_SIGNED_BIN PROC NEAR
    MOV AX, NUMBER
	XOR BX, BX
	CMP BL, NEGATIVE
	JE POSITIVE_TOHX
    NEG AX
	POSITIVE_TOHX:
    MOV CL, ' '
    MOV SIGN, CL
    CMP AX, 7FFFH
    JBE NOTOVERFLOW
    NEG AX
    MOV CL, '-'
    MOV SIGN, CL
    NOTOVERFLOW:
    MOV BX, 15
    GETBIN:
        MOV DX, AX
        AND DX, MASK2
        ADD DL, '0'
        MOV BIN_STR[BX], DL
        MOV CL, 1
        SAR AX, CL
        DEC BX
        CMP BX, -1
        JNE GETBIN
    RET
TO_SIGNED_BIN ENDP

CODESEG ENDS
END